<idea-plugin>
  <id>ice.explosive.gdscript</id>
  <name>GdScript</name>
  <version>0.4.6</version>
  <vendor email="h.raven@centrum.cz" url="https://gitlab.com/IceExplosive/gdscript">IceExplosive</vendor>

  <description>GdScript2 language plugin for GodotEngine 4.0+</description>
  <change-notes>
  </change-notes>
  <incompatible-with>gdscript</incompatible-with>

  <depends>com.intellij.modules.lang</depends>

  <extensions defaultExtensionNs="com.intellij">
    <fileType name="GdScript File" implementationClass="gdscript.GdFileType" fieldName="INSTANCE" language="GdScript" extensions="gd"/>
    <lang.parserDefinition language="GdScript" implementationClass="gdscript.GdParserDefinition"/>
    <lang.syntaxHighlighterFactory language="GdScript" implementationClass="gdscript.highlighter.GdSyntaxHighlighterFactory"/>
    <colorSettingsPage implementation="gdscript.highlighter.GdColorSettingsPage"/>
    <additionalTextAttributes scheme="Darcula" file="colorSchemes/GdDarculaColorScheme.xml"/>
    <lang.commenter language="GdScript" implementationClass="gdscript.formatter.GdCommenter"/>
    <lang.findUsagesProvider language="GdScript" implementationClass="gdscript.codeInsight.GdUsageProvider" />
    <configurationType implementation="gdscript.run.GdRunConfigurationType" />
    <runConfigurationProducer implementation="gdscript.run.GdRunConfigurationProducer" />
    <defaultLiveTemplates file="/templates/GdScript.xml" />
    <liveTemplateContext contextId="GDSCRIPT" implementation="gdscript.GdTemplateContextType" />
    <codeInsight.parameterInfo language="GdScript" id="GdParameterInfoHandler" implementationClass="gdscript.codeInsight.GdParameterInfoHandler" />
    <lang.documentationProvider language="GdScript" implementationClass="gdscript.codeInsight.GdDocumentationProvider" />
    <codeInsight.parameterNameHints language="GdScript" implementationClass="gdscript.codeInsight.GdInlayParameterHintProvider" />

    <!-- settings -->
    <applicationService serviceImplementation="gdscript.settings.GdSettingsState" />
    <projectConfigurable
        parentId="language"
        instance="gdscript.settings.GdSettingsConfigurable"
        id="gdscript.settings.GdSettingsConfigurable"
        displayName="GdScript"
    />

    <!-- Line markers -->
    <runLineMarkerContributor language="GdScript" implementationClass="gdscript.lineMarker.GdRunLineMarkerProvider" />
    <codeInsight.lineMarkerProvider language="GdScript" implementationClass="gdscript.lineMarker.GdResourceLineMarkerContributor" />
    <codeInsight.lineMarkerProvider language="GdScript" implementationClass="gdscript.lineMarker.GdSignalLineMarkerContributor" />
    <codeInsight.lineMarkerProvider language="GdScript" implementationClass="gdscript.lineMarker.GdTraitLineMarkerContributor" />

    <!-- Tscn & Project -->
    <fileType name="Tscn file" implementationClass="tscn.TscnFileType" fieldName="INSTANCE" language="Tscn" extensions="tscn"/>
    <fileType name="GodotProject file" implementationClass="project.ProjectFileType" fieldName="INSTANCE" language="GodotProject" extensions="godot"/>
    <lang.parserDefinition language="Tscn" implementationClass="tscn.TscnParserDefinition"/>
    <lang.parserDefinition language="GodotProject" implementationClass="project.ProjectParserDefinition"/>

    <!-- Completions -->
    <completion.contributor   language="GdScript" order="first" implementationClass="gdscript.completion.GdKeywordContributor"/>
    <completion.contributor   language="GdScript" implementationClass="gdscript.completion.GdRootContributor"/>
    <completion.contributor   language="GdScript" implementationClass="gdscript.completion.GdClassNameCompletionContributor"/>
    <completion.contributor   language="GdScript" implementationClass="gdscript.completion.GdTypeHintCompletionContributor"/>
    <completion.contributor   language="GdScript" implementationClass="gdscript.completion.GetterSetterNameCompletion"/>
    <completion.contributor   language="GdScript" implementationClass="gdscript.completion.GdMethodDeclCompletionContributor"/>
    <completion.contributor   language="GdScript" implementationClass="gdscript.completion.GdResourceCompletionContributor"/>
    <psi.referenceContributor language="GdScript" implementation="gdscript.completion.GdInheritanceReferenceContributor" />
    <psi.referenceContributor language="GdScript" implementation="gdscript.completion.GdTypeHintReferenceContributor" />
    <psi.referenceContributor language="GdScript" implementation="gdscript.completion.GdSetGetMethodIdReferenceContributor" />
    <psi.referenceContributor language="GdScript" implementation="gdscript.completion.GdRefIdReferenceContributor" />
    <psi.referenceContributor language="GdScript" implementation="gdscript.completion.GdResourceReferenceContributor" />

    <!-- Annotators -->
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdClassNameAnnotator" />
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdTypeHintAnnotator" />
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdConstVarIdAnnotator" />
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdAnnotationAnnotator" />
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdSetGetAnnotator" />
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdConstructorAnnotator" />
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdReturnTypeAnnotator" />
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdMethodNameAnnotator" />
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdLambdaAnnotator" />
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdResourceTypeAnnotator" />
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdRefIdAnnotator" />
    <annotator language="GdScript" implementationClass="gdscript.annotator.GdMatchStmtAnnotator" />

    <!-- Indices -->
    <stubElementTypeHolder class="gdscript.psi.GdTypes" />
    <stubIndex implementation="gdscript.index.impl.GdClassIdIndex" />
    <stubIndex implementation="gdscript.index.impl.GdClassNamingIndex" />
    <stubIndex implementation="gdscript.index.impl.GdClassDeclIndex" />
    <stubIndex implementation="gdscript.index.impl.GdInheritanceIndex" />
    <stubIndex implementation="gdscript.index.impl.GdConstDeclIndex" />
    <stubIndex implementation="gdscript.index.impl.GdClassVarDeclIndex" />
    <stubIndex implementation="gdscript.index.impl.GdMethodDeclIndex" />
    <stubIndex implementation="gdscript.index.impl.GdSignalDeclIndex" />
    <stubIndex implementation="gdscript.index.impl.GdEnumDeclIndex" />
    <fileBasedIndex implementation="gdscript.index.impl.GdFileResIndex" />
    <!-- Tscn & Project -->
    <stubIndex implementation="tscn.index.impl.TscnResourceIndex" />
    <stubIndex implementation="tscn.index.impl.TscnNodeIndex" />
    <stubIndex implementation="tscn.index.impl.TscnParagraphIndex" />
    <stubIndex implementation="tscn.index.impl.TscnConnectionIndex" />
    <stubIndex implementation="project.index.impl.ProjectSectionIndex" />
    <stubIndex implementation="project.index.impl.ProjectDataIndex" />

    <!-- Actions -->
    <intentionAction>
      <className>gdscript.action.GdRemoveSetGetAction</className>
      <bundleName>messages.gdscript</bundleName>
      <categoryKey>intention.category</categoryKey>
    </intentionAction>
    <intentionAction>
      <className>gdscript.action.GdPropageTraitChangesAction</className>
      <bundleName>messages.gdscript</bundleName>
      <categoryKey>intention.category</categoryKey>
    </intentionAction>

    <!-- Formatters -->
    <lang.braceMatcher language="GdScript" implementationClass="gdscript.formatter.GdBraceMatcher" />
    <lang.formatter language="GdScript" implementationClass="gdscript.formatter.GdFormattingModelBuilder" />
    <codeStyleSettingsProvider implementation="gdscript.formatter.GdCodeStyleSettingsProvider" />
    <langCodeStyleSettingsProvider implementation="gdscript.formatter.GdLanguageCodeStyleSettingsProvider" />

    <!-- File templates -->
    <internalFileTemplate name="Node default" />
    <internalFileTemplate name="Object empty" />
    <internalFileTemplate name="CharacterBody2D basic_movement" />
    <internalFileTemplate name="CharacterBody3D basic_movement" />
    <internalFileTemplate name="EditorPlugin plugin" />
    <internalFileTemplate name="EditorScenePostImport basic_import_script" />
    <internalFileTemplate name="EditorScenePostImport no_comments" />
    <internalFileTemplate name="EditorScript basic_editor_script" />
    <internalFileTemplate name="VisualShaderNodeCustom basic" />

    <lang.foldingBuilder language="GdScript" implementationClass="gdscript.formatter.GdFoldingBuilder" />
    <lang.foldingBuilder language="GdScript" implementationClass="gdscript.formatter.GdTraitFoldingBuilder" />
    <lang.psiStructureViewFactory language="GdScript" implementationClass="gdscript.structureView.GdStructureViewFactory" />
    <lang.quoteHandler language="GdScript" implementationClass="gdscript.completion.GdQuoteHandler" />
  </extensions>

  <actions>
    <action id="gdscript.action.GdCreateFileAction" class="gdscript.action.GdCreateFileAction" >
      <add-to-group group-id="NewGroup" anchor="before" relative-to-action="NewFile" />
    </action>
    <action id="gdscript.action.GdAddTraitAction" class="gdscript.action.GdAddTraitAction" text="Add GdScript Trait">
      <add-to-group group-id="GenerateGroup" anchor="first" />
    </action>
  </actions>

</idea-plugin>
